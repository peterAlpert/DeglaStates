<!-- show-place-vio.component.html -->
<div class="table-responsive mt-4">

    <div class="my-5" dir="rtl">
        <h2 class="text-center fw-bold mt-4 mb-3" style="font-size: 2.2rem; color: #FFD700;">
            ุณุฌู ูุฎุงููุงุช ุงููุญูุงุช
        </h2>
        <button class="btn btn-sm btn-outline-warning" (click)="getViolations()">
            ๐ ุชุญุฏูุซ ุงูุจูุงูุงุช
        </button>
    </div>

    <div class="d-flex flex-wrap align-items-center gap-3 my-5" dir="rtl">
        <label class=" fw-bold">๐ ููุชุฑ ุญุณุจ ุงุณู ุงููุญู:</label>

        <select [(ngModel)]="selectedStore" class="form-select form-select-sm w-auto bg-dark text-light border-light">
            <option value="">ุนุฑุถ ูู ุงููุญูุงุช</option>
            <option *ngFor="let s of storeList" [value]="s">{{ s }}</option>
        </select>

        <button class="btn btn-sm btn-outline-danger" (click)="clearFilter()">
            โ ุฅุฒุงูุฉ ุงูููุชุฑ
        </button>
    </div>


    <table class="table table-bordered table-hover text-center align-middle custom-table mb-5" dir="rtl">
        <thead class="table-warning text-dark">
            <tr>
                <th>#</th>
                <th>ุชุงุฑูุฎ</th>
                <th>ุงูููู</th>
                <th>ุงูุชูููุช</th>
                <th>ุงูููุงู</th>
                <th>ุงุณู ุงููุญู</th>
                <th>ุงูููุชุฑูู</th>
                <th>ุงููุดุฑู</th>
                <th>ุงููุฎุงููุฉ</th>
                <th>ุงูุฅุฌุฑุงุก</th>
                <th>๐พ</th>
                <th>๐๏ธ</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let v of getFilteredViolations(); let i = index">
                <td class="fw-bold">{{ i + 1 }}</td>
                <td><input [(ngModel)]="v.date" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.day" class="form-control form-control-sm text-center" readonly /></td>
                <td><input [(ngModel)]="v.time" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.location" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.store" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.control" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.supervisor" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.violationType" class="form-control form-control-sm text-center" /></td>
                <td><input [(ngModel)]="v.action" class="form-control form-control-sm text-center" /></td>
                <td>
                    <button class="btn btn-success" (click)="updateViolation(v)" title="ุญูุธ ุงูุชุนุฏูู">๐พ</button>
                </td>
                <td>
                    <button class="btn btn-danger" (click)="deleteViolation(v.id)" title="ุญุฐู ุงูุณุฌู">๐๏ธ</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- ๐ ุฅุญุตุงุฆูุงุช ูุฎุงููุงุช ุงููุญูุงุช -->
    <div class="d-flex justify-content-center mt-5">
        <div class="card shadow-lg bg-dark text-light w-50 border-warning">
            <div class="card-body">
                <h4 class="text-center mb-4 fw-bold" style="color: #FFD700;">๐ ุฅุญุตุงุฆูุงุช ูุฎุงููุงุช ุงููุญูุงุช</h4>

                <div class="table-responsive">
                    <table class="table table-bordered text-center align-middle custom-table table-striped table-dark"
                        dir="rtl">
                        <thead class="table-warning text-dark">
                            <tr>
                                <th>ุงุณู ุงููุญู</th>
                                <th>ุนุฏุฏ ุงููุฎุงููุงุช</th>
                                <th class="text-danger">ุนุฏุฏ ุงูุฅูุฐุงุฑุงุช</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let stat of storeStats">
                                <td class="fw-bold">{{ stat.store }}</td>
                                <td>{{ stat.count }}</td>
                                <td class="text-danger fw-bold">{{ stat.warnings }}</td>
                            </tr>
                        </tbody>
                        <tfoot class="table-warning fw-bold text-dark">
                            <tr>
                                <td>ุงูุฅุฌูุงูู</td>
                                <td>{{ totalViolations }}</td>
                                <td class="text-danger">{{ totalWarnings }}</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="text-center my-4">
        <button class="btn btn-outline-light btn-sm px-4 py-2" (click)="exportToExcel()">
            ๐งพ ุชุตุฏูุฑ ุฅูู Excel
        </button>
    </div>
</div>